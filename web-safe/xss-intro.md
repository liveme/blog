# web前端安全之XSS
## XSS原理简介
XSS（Cross Site Scripting）跨站脚本漏洞是一种将恶意 JavaScript 代码插入到其他Web用户页面里执行以达到攻击目的的漏洞。Web应用软件将用户的交互信息没有作有效验证和过滤就输出给了其他用户，攻击者插入的可执行脚本就可能形成跨站脚本攻击。
*根本原因*：数据与代码未做分离；
*危害*：盗取cookie，账户劫持，拒绝服务攻击，布局错乱
## 产生场景
肉眼看得到，看不到的用户输入（如某些Flash XSS需要抓包才可以看到接口）都有可能成为XSS漏洞的切入点。
1. 在用户可控的输入点（例如写评论、发布文章）等，数据入库前没有做验证和相关的安全过滤；
2. 在未检验包含数据的动态内容是否存在恶意代码的情况下，便将其传送给用户；

![xss-example](https://cloud.githubusercontent.com/assets/1295348/9469494/f0c7a24e-4b79-11e5-8a68-36ab3db50a43.png)

## XSS类型
常见的，XSS攻击会被分为反射型XSS、储存型XSS和DOM-based XSS。其实这些分类都是从黑客利用的角度来划分的，DOM-based是属于反射型的一种。
*反射型XSS*：包括了DOM-based XSS，关键在于**通过url传入参数控制页面的输出**，常见出现在GET请求上；
*储存型XSS*：用户产生的带有恶意代码的数据存入数据库后，再取出来使用，导致XSS；所以这种恶意攻击可以在网站任何地方出现，并且如果不及时移除，攻击会一直持续下去。
## 攻防策略
*原则*：永远不要相信用户的输入！
### 反射型攻防
1. 利用对url进行短域名处理，从而隐藏真实的url；

